var b=Object.defineProperty,h=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))S.call(t,n)&&f(e,n,t[n]);if(s)for(var n of s(t))w.call(t,n)&&f(e,n,t[n]);return e},p=(e,t)=>h(e,L(t));const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};k();function q(e,t){return e.filter(n=>n.id===t)[0]}function x(e,t){return e.filter(n=>n.id!==t)}function A(e,t){const n=F(e,t);return y(n)?[...e,n]:e}function $(e,t,n,i){const r=e.findIndex(u=>u.id===t);if(r<0)return e;const o=p(m({},e[r]),{name:n,done:i});return y(o)?[...e.slice(0,r),o,...e.slice(r+1)]:e}function F(e,t){return{id:`${e.reduce((r,o)=>Math.max(r,parseInt(o.id,10)),Number.MIN_VALUE)+1}`,name:t,done:!1}}function y(e){return!(!e.id||!e.name)}const I="items";async function a(e){const t=JSON.stringify(e);window.localStorage.setItem(I,t)}async function N(){var n;const e=(n=window.localStorage.getItem(I))!=null?n:"[]";return JSON.parse(e)}const O=document.querySelector("#app");let c=[],l;function C(){return`<form class="add-form">
    <input type="text" />
    <button type="submit">Add</button>
  </form>`}function T(e){return`<button class="delete-button" data-id="${e}">\u2716\uFE0F</button>`}function M(e){return`<li data-id="${e.id}">
  <span>\u{1F4CC} ${e.name} ${e.done?"\u2714\uFE0F":""}</span>
  ${T(e.id)}
</li>`}function d(){D(),O.innerHTML=`
    <ul class="list">
      ${c.map(e=>M(e)).join("")}
    </ul>
    ${C()}
  `,l=document.querySelector(".add-form input[type=text]"),B()}async function v(e){const t=e.currentTarget,n=t.dataset.id;if(console.log(n,t),!n)return;const i=q(c,n);if(!!i)return c=$(c,n,i.name,!i.done),d(),await a(c),!0}async function g(e){e.preventDefault();const t=l.value,n=A(c,t);n!==c&&(c=n,l.value="",d(),await a(c),l.focus())}async function E(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.dataset.id;!t||(c=x(c,t),d(),await a(c))}function B(){var e;document.querySelectorAll("ul.list > li").forEach(t=>{t.addEventListener("click",v)}),(e=document.querySelector(".add-form button"))==null||e.addEventListener("click",g),document.querySelectorAll(".delete-button").forEach(t=>{t.addEventListener("click",E)})}function D(){var e;document.querySelectorAll("ul.list > li").forEach(t=>{t.removeEventListener("click",v)}),(e=document.querySelector(".add-form button"))==null||e.removeEventListener("click",g),document.querySelectorAll(".delete-button").forEach(t=>{t.removeEventListener("click",E)})}N().then(e=>{c=e,d()}).catch(e=>{console.error(e)});
