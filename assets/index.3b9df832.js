var y=Object.defineProperty,I=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(e,n,t)=>n in e?y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,i=(e,n)=>{for(var t in n||(n={}))$.call(n,t)&&f(e,t,n[t]);if(l)for(var t of l(n))w.call(n,t)&&f(e,t,n[t]);return e},a=(e,n)=>I(e,b(n));const h=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=t(r);fetch(r.href,u)}};h();function v(e,n){let t=e;return{get:o=>x(t,o),delete:o=>{t=A(t,o),n(t)},add:o=>{const r=N(t,o);return r===t?!1:(t=r,n(t),!0)},update:(o,r)=>{const u=S(t,o,r);return u===t?!1:(t=u,n(t),!0)}}}function x(e,n){return e.filter(t=>t.id===n)[0]}function A(e,n){return e.filter(t=>t.id!==n)}function N(e,n){const t=D(e,n);return p(t)?[...e,t]:e}function S(e,n,t){const o=e.findIndex(u=>u.id===n);if(o<0)return e;const r=a(i(i({},e[o]),t),{doneAt:t.done?new Date:void 0});return p(r)?[...e.slice(0,o),r,...e.slice(o+1)]:e}function D(e,n){return{id:`${e.reduce((r,u)=>Math.max(r,parseInt(u.id,10)),Number.MIN_VALUE)+1}`,name:n,done:!1}}function p(e){return!(!e.id||!e.name)}const g="items";async function L(e){const n=JSON.stringify(e.map(t=>a(i({},t),{doneAt:E(t.doneAt)})));window.localStorage.setItem(g,n)}async function F(){var t;const e=(t=window.localStorage.getItem(g))!=null?t:"[]";return JSON.parse(e).map(o=>a(i({},o),{doneAt:O(o.doneAt)}))}function E(e){return e?`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} 00:00:00`:""}function O(e){if(!!e)return new Date(e)}const M=document.querySelector("#app");let c,s;function C(){return`<form class="add-form">
    <input type="text" maxlength="40" />
    <button type="submit" class="add-button">+</button>
  </form>`}function k(e){return`<button class="delete-button" data-id="${e}">\u2716\uFE0F</button>`}function q(e){return e?`${e.getMonth()+1}/${e.getDate()}`:""}function B(e){return`<li class="list-item ${e.done?"done":""}"  data-id="${e.id}">
  <span class="name">\u{1F4CC} ${e.name} ${e.done?"\u2714\uFE0F":""}</span>
  <span class="doneat">${q(e.doneAt)}</span>
  ${k(e.id)}
</li>`}function m(e){M.innerHTML=`
    <ul class="list">
      ${e.map(n=>B(n)).join("")}
    </ul>
    ${C()}
  `,c=document.querySelector(".add-form input[type=text]")}async function P(e){const n=e.dataset.id;if(!n)return;const t=s.get(n);!t||s.update(n,{done:!t.done})}async function T(e){e.preventDefault();const n=c.value;s.add(n)&&(c.value=""),c.focus()}async function H(e,n){e.preventDefault(),e.stopPropagation();const t=n.dataset.id;!t||s.delete(t)}function J(){document.addEventListener("click",e=>{const n=".add-button, .delete-button, .list-item",t=e.target.closest(n);!t||(t.className.includes("add-button")?T(e):t.className.includes("delete-button")?H(e,t):t.className.includes("list-item")&&P(t))})}J();F().then(e=>{s=v(e,async n=>{m(n),await L(n)}),m(e)}).catch(e=>{console.error(e)});
